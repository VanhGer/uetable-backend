(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{89713:function(e,t,s){Promise.resolve().then(s.bind(s,14996))},14996:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return SignIn}});var n=s(57437),a=s(61396),l=s.n(a),i=s(2265),r=s(57614),o=s(48347),c=s(17590),d=s(75826),u=s(3198),h=s(25418),x=s(58837),p=s(24033),m=s(10689),f=s(16691),g=s.n(f);function SignIn(){let e=(0,u.I0)();(0,u.v9)(h.a);let[t,s]=(0,i.useState)(!1),[a,f]=(0,i.useState)(!1),[b,j]=(0,i.useState)(""),[v,k]=(0,i.useState)(!1),[N,w]=(0,i.useState)(""),[y,S]=(0,i.useState)(!1),[F,C]=(0,i.useState)("password"),[I,_]=(0,i.useState)(!1),[A,V]=(0,i.useState)(""),D=(0,p.useRouter)(),changeStatus=()=>{"password"==F?C("text"):C("password")};async function handleSignIn(){d.Z.get("/users/"+b).then(t=>{e(x.Y.updateAuthState({signedIn:!0,logging:!1,studentId:b,name:t.name})),D.push("/")})}async function onSignInClick(){V("");let e=!1;""===b&&(s(!0),e=!0),""===N&&(f(!0),e=!0),e||(_(!0),d.Z.post("/users/auth",{studentid:b,password:N}).then(async e=>{let t=new Date;t.setDate(t.getDate()+999999),m.cookies.set("authToken",e.authToken,{expires:t,path:"/"}),m.cookies.set("studentid",b,{expires:t,path:"/"}),m.cookies.set("password",N,{expires:t,path:"/"}),m.cookies.set("role",e.role,{expires:t,path:"/"}),_(!1),await handleSignIn()}).catch(e=>{_(!1),401===e.status?V("Mật khẩu kh\xf4ng đ\xfang."):403===e.status?V("T\xe0i khoản của bạn kh\xf4ng tồn tại"):V("Đ\xe3 c\xf3 lỗi xảy ra. Vui l\xf2ng thử lại sau.")}))}return(0,n.jsx)("main",{className:"flex justify-center p-[48px] bg-[#FCFCFC] h-screen relative",children:(0,n.jsxs)("div",{className:"max-w-[296px]",children:[(0,n.jsx)("div",{children:(0,n.jsx)("button",{className:"bg-transparent text-[48px] my-6 text-primary font-bold font-mainfont",children:(0,n.jsx)(l(),{href:"/",children:(0,n.jsx)(g(),{alt:"logo",src:"https://static.vecteezy.com/system/resources/previews/024/241/000/original/colorful-shiba-inu-dog-shiba-inu-portrait-dog-sticker-clip-art-dog-lover-design-ai-generated-png.png",width:96,height:96})})})}),(0,n.jsx)("div",{className:"text-[48px] text-black font-semibold my-8 tracking-tighter",children:"Đăng Nhập"}),(0,n.jsxs)("div",{className:"w-full mb-4 relative",children:[(0,n.jsx)("input",{value:b,onChange:e=>{j(e.target.value)},onFocus:()=>{k(!0)},type:"text",name:"email",className:"focus:bg-white focus:border focus:border-[#9A9FA5] w-full pl-8 h-[48px] px-[10px] rounded-lg bg-[#F4F4F4] font-semibold ".concat(v&&""===b?"border-red-500":""),placeholder:"Nhập MSSV"}),t&&""===b&&(0,n.jsx)("p",{className:"text-red-500 mt-2 ml-2 text-sm font-medium",children:"*Vui l\xf2ng nhập MSSV"})]}),(0,n.jsxs)("div",{className:"w-full mb-2 relative",children:[(0,n.jsxs)("div",{className:"w-full relative",children:[(0,n.jsx)("input",{value:N,onChange:e=>{w(e.target.value)},onFocus:()=>{S(!0)},type:F,className:"focus:bg-white focus:border focus:border-[#9A9FA5] w-full pl-8 h-[48px] px-[10px] rounded-lg bg-[#F4F4F4] font-semibold ".concat(y&&""===N?"border-red-500":""),placeholder:"Nhập mật khẩu"}),(0,n.jsxs)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:["password"==F&&(0,n.jsx)(o.default,{onClick:changeStatus}),"text"==F&&(0,n.jsx)(c.default,{onClick:changeStatus})]})]}),a&&""===N&&(0,n.jsx)("p",{className:"text-red-500 mt-2 ml-2 text-sm font-medium",children:"*Vui l\xf2ng nhập mật khẩu"})]}),(0,n.jsx)("div",{className:"w-full mt-4",children:(0,n.jsx)("button",{className:"font-bold text-white rounded-lg bg-primary w-full py-2 hover:bg-dark-primary",onClick:onSignInClick,children:!0===I?(0,n.jsx)("span",{children:"Đang đăng nhập  "}):(0,n.jsx)("span",{children:"Đăng nhập "})})}),(0,n.jsx)("div",{className:"w-full flex justify-end items-end mt-2",children:(0,n.jsx)("button",{className:"text-sm text-primary font-semibold text-gray-600 hover:underline hover:underline-offset-2",onClick:()=>{D.push("/forgotpassword")},children:"Qu\xean mật khẩu?"})}),""!=A&&(0,n.jsx)("div",{className:"w-full relative",children:(0,n.jsxs)("div",{className:"w-full rounded-lg flex bg-red-200 p-4 mt-6 absolute top-0",children:[(0,n.jsx)(r.default,{style:{color:"#FF0000"}}),(0,n.jsx)("p",{className:"text-sm ml-4 font-semibold text-red-600",children:A})]})}),(0,n.jsxs)("div",{className:"text-sm font-bold absolute bottom-16",children:[(0,n.jsx)("span",{className:"font-semibold text-gray-700",children:"Bạn chưa c\xf3 t\xe0i khoản? "}),(0,n.jsx)("button",{className:"text-primary hover:underline hover:underline-offset-2",children:(0,n.jsx)(l(),{href:"/signup",children:"Đăng k\xfd ngay"})})]})]})})}}},function(e){e.O(0,[1866,2400,3190,3712,9020,7614,9273,2808,9235,3986,4890,3954,8110,9385,5623,413,3354,1396,2333,5895,2838,3574,8466,9158,9541,689,2971,2472,1744],function(){return e(e.s=89713)}),_N_E=e.O()}]);