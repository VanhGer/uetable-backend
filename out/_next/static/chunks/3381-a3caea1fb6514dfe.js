(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3381],{53134:function(e,t,s){"use strict";s.d(t,{Z:function(){return LikeIcon}});var n=s(57437);function LikeIcon(e){let{size:t,color:s,className:l,solid:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:l,width:null!=t?t:20,height:null!=t?t:20,viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3"})]})}},61939:function(e,t,s){"use strict";s.d(t,{Z:function(){return ReportIcon}});var n=s(57437);function ReportIcon(e){let{size:t,color:s,className:l}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:l,width:null!=t?t:20,height:null!=t?t:20,viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"}),(0,n.jsx)("path",{d:"M12 8v3"}),(0,n.jsx)("path",{d:"M12 14v.01"})]})}},89235:function(e,t,s){"use strict";s.d(t,{Z:function(){return Comment}});var n=s(57437),l=s(14666),a=s(35302),o=s(2265),c=s(3198),i=s(23986);s(50777);var r=s(78073);function ReplyIcon(e){let{size:t,color:s,className:l}=e;return(0,n.jsx)("svg",{viewBox:"0 0 16 16",width:null!=t?t:20,height:null!=t?t:20,fill:null!=s?s:r.C.ROYAL_GRAY_COLOR,className:l,children:(0,n.jsx)("path",{d:"M10.805 1.862a.67.67 0 0 0-.943 0c-.261.26-.26.682 0 .943l.526.526H6.667A4.67 4.67 0 0 0 2 7.998v.667c0 .368.298.667.667.667s.667-.299.667-.667v-.667c0-1.841 1.492-3.333 3.333-3.333h3.724l-.529.529a.67.67 0 0 0 0 .943c.26.261.682.26.943 0l1.43-1.43a1 1 0 0 0 0-1.414l-1.43-1.43zM9.332 12.667A4.67 4.67 0 0 0 13.999 8v-.667c0-.368-.298-.667-.667-.667s-.667.298-.667.667V8c0 1.841-1.492 3.333-3.333 3.333H5.608l.529-.529a.67.67 0 0 0 0-.943c-.26-.261-.682-.26-.943 0l-1.43 1.43a1 1 0 0 0 0 1.414l1.43 1.43a.67.67 0 0 0 .943 0c.261-.26.26-.682 0-.943l-.526-.526h3.721z"})})}function MoreHoriIcon(e){let{size:t,color:s,className:l}=e;return(0,n.jsx)("svg",{viewBox:"0 0 16 16",width:null!=t?t:20,height:null!=t?t:20,fill:null!=s?s:r.C.ROYAL_GRAY_COLOR,className:l,children:(0,n.jsx)("path",{d:"M5.334 8.006c0 .736-.597 1.333-1.333 1.333s-1.333-.597-1.333-1.333S3.264 6.673 4 6.673s1.333.597 1.333 1.333zm4 0c0 .736-.597 1.333-1.333 1.333s-1.333-.597-1.333-1.333S7.264 6.673 8 6.673s1.333.597 1.333 1.333zm4 0c0 .736-.597 1.333-1.333 1.333s-1.333-.597-1.333-1.333.597-1.333 1.333-1.333 1.333.597 1.333 1.333z"})})}var d=s(99110),h=s(75826),x=s(61939),m=s(53134);function LikedIcon_LikeIcon(e){let{size:t,color:s,className:l,solid:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:l,width:null!=t?t:20,height:null!=t?t:20,viewBox:"0 0 24 24",strokeWidth:"2",stroke:s,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M13 3a3 3 0 0 1 2.995 2.824l.005 .176v4h2a3 3 0 0 1 2.98 2.65l.015 .174l.005 .176l-.02 .196l-1.006 5.032c-.381 1.626 -1.502 2.796 -2.81 2.78l-.164 -.008h-8a1 1 0 0 1 -.993 -.883l-.007 -.117l.001 -9.536a1 1 0 0 1 .5 -.865a2.998 2.998 0 0 0 1.492 -2.397l.007 -.202v-1a3 3 0 0 1 3 -3z",strokeWidth:"0",fill:s}),(0,n.jsx)("path",{d:"M5 10a1 1 0 0 1 .993 .883l.007 .117v9a1 1 0 0 1 -.883 .993l-.117 .007h-1a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-7a2 2 0 0 1 1.85 -1.995l.15 -.005h1z",strokeWidth:"0",fill:s})]})}function DisLikeIcon(e){let{size:t,color:s,className:l,solid:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:l,width:null!=t?t:24,height:null!=t?t:24,viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M7 13v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v7a1 1 0 0 0 1 1h3a4 4 0 0 1 4 4v1a2 2 0 0 0 4 0v-5h3a2 2 0 0 0 2 -2l-1 -5a2 3 0 0 0 -2 -2h-7a3 3 0 0 0 -3 3"})]})}function DisLikedIcon(e){let{size:t,color:s,className:l,solid:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:l,width:null!=t?t:20,height:null!=t?t:20,viewBox:"0 0 24 24",strokeWidth:"2",stroke:s,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)("path",{d:"M13 21.008a3 3 0 0 0 2.995 -2.823l.005 -.177v-4h2a3 3 0 0 0 2.98 -2.65l.015 -.173l.005 -.177l-.02 -.196l-1.006 -5.032c-.381 -1.625 -1.502 -2.796 -2.81 -2.78l-.164 .008h-8a1 1 0 0 0 -.993 .884l-.007 .116l.001 9.536a1 1 0 0 0 .5 .866a2.998 2.998 0 0 1 1.492 2.396l.007 .202v1a3 3 0 0 0 3 3z",strokeWidth:"0",fill:s}),(0,n.jsx)("path",{d:"M5 14.008a1 1 0 0 0 .993 -.883l.007 -.117v-9a1 1 0 0 0 -.883 -.993l-.117 -.007h-1a2 2 0 0 0 -1.995 1.852l-.005 .15v7a2 2 0 0 0 1.85 1.994l.15 .005h1z",strokeWidth:"0",fill:s})]})}var u=s(78399),p=s(51696),f=s(2114),g=s(25418),v=s(24033);let{Text:j}=a.default;function CommentReply(e){let{Id:t,pageId:s,pageType:l,author:a,content:r,parent:_,usersLiked:y,usersDisLiked:k,timestamp:N,hasLiked:b,hasDisLiked:w,editable:I=!1}=e,S=(0,c.v9)(g.a),[C,z]=(0,o.useState)(y),[Z,L]=(0,o.useState)(k),[R,H]=(0,o.useState)(!1),[M,O]=(0,o.useState)(!1),[W,B]=(0,o.useState)(!1);(0,o.useRef)(null);let[T,F]=(0,o.useState)(-1),[E,A]=(0,o.useState)(-1);(0,c.I0)();let[D,q]=(0,o.useState)("@"+a.name+" "),[J,V]=o.useState(!1),[Y,G]=(0,o.useState)(""),[Q,U]=(0,o.useState)("auto"),[P,K]=(0,o.useState)(b),[X,$]=(0,o.useState)(w);new d.Z;let[ee,et]=(0,o.useState)("https://yt3.googleusercontent.com/-CFTJHU7fEWb7BYEb6Jh9gm1EpetvVGQqtof0Rbh-VQRIznYYKJxCaqv_9HeBcmJmIsp2vOO9JU=s900-c-k-c0x00ffffff-no-rj"),[es,en]=(0,o.useState)(0),[el,ea]=(0,o.useState)(0),eo=(0,v.useRouter)();(0,o.useEffect)(()=>{(null==S?void 0:S.signedIn)&&h.Z.get("/users/"+S.studentId).then(e=>{et(e.avatar)})},[null==S?void 0:S.signedIn,S.studentId]);let ec=(0,o.useCallback)(()=>H(e=>!e),[]),likeReq=e=>{A(0),h.Z.post("page/like/",{pageId:t,pageType:"C",score:e}).then(e=>{"Successfully like!"===e.message&&(A(1),ea(el+1))}).catch(e=>{})};(0,o.useEffect)(()=>{console.log(t,es);let e="page/like/C/".concat(t,"/");h.Z.get(e).then(e=>{console.log(e),z(e.likes),L(e.dislikes),-1===e.userLike?(K(!1),$(!0)):(1===e.userLike?K(!0):K(!1),$(!1))}).catch(e=>{})},[t,es,el]),(0,o.useEffect)(()=>{1===T&&(q("@"+a.name+" "),U("auto"),ec())},[a.name,T,ec]);let ei=new Date(N),er=Date.now(),ed=er-N,eh="";eh=ed<5e3?"Vừa xong":ed<6e4?"".concat(Math.floor(ed/1e3)," gi\xe2y trước"):ed<36e5?"".concat(Math.floor(ed/6e4)," ph\xfat trước"):ed<864e5?"".concat(Math.floor(ed/36e5)," giờ trước"):ed<31536e6?"".concat(Math.floor(ed/864e5)," ng\xe0y trước"):ed<31536e6?ei.toLocaleDateString("en-GB",{day:"numeric",month:"short"}):ei.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});let[ex,em]=(0,o.useState)();return(0,o.useEffect)(()=>{let e="comment/getchildren/".concat(t);h.Z.get(e).then(e=>{console.log(e),em([...e])}).catch(e=>{})},[t]),(0,n.jsxs)("div",{className:(0,i.m)("flex"),children:[(0,n.jsx)("div",{className:"comment__avatar cursor-pointer",style:{width:"48px",height:"48px"},onClick:function(){eo.push("/profile?studentid="+a.studentId)},children:(0,n.jsx)(f.ZP,{className:"",src:a.avatar,size:48})}),(0,n.jsxs)("div",{className:"comment__details",style:{flex:"0 0 calc(100% - 48px)",width:"calc(100% - 48px)",paddingLeft:"16px"},children:[(0,n.jsxs)("div",{className:"flex",style:{alignItems:"center"},children:[(0,n.jsxs)("div",{style:{marginRight:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,n.jsx)(j,{strong:!0,style:{fontSize:"16px",lineHeight:"0.9"},children:a.name}),(0,n.jsxs)("div",{className:"comment__login",style:{marginTop:"4px",fontSize:"12px",fontWeight:"500",color:"#6F767E"},children:["@",a.studentId]})]}),(0,n.jsx)("div",{style:{marginLeft:"8px",whiteSpace:"nowrap",fontSize:"12px",fontWeight:"500",color:"#9A9FA5"},children:eh}),(0,n.jsxs)("div",{className:(0,i.m)("actions actions_small",!0===W?"active":""),children:[(0,n.jsx)("button",{className:"actions__button",onClick:()=>B(!W),children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(MoreHoriIcon,{size:"20px"})})}),(0,n.jsx)("div",{className:"actions__body",children:(0,n.jsxs)("button",{className:"actions__option",style:{alignItems:"start"},onClick:()=>O(!M),children:[(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{size:"20px",className:"icon"})}),(0,n.jsxs)("div",{className:"flex",style:{flexDirection:"column"},children:[(0,n.jsx)(j,{style:{textAlign:"left"},children:" B\xe1o c\xe1o b\xecnh luận"}),(0,n.jsxs)("div",{style:{wordWrap:"break-word",textAlign:"left",fontSize:"12px"},children:[" Ch\xfang t\xf4i sẽ kh\xf4ng cho ",a.name," biết ai đ\xe3 b\xe1o c\xe1o."]})]})]})})]})]}),(0,n.jsx)("div",{className:"comment__content",style:{marginTop:"12px",fontWeight:"500",color:"#33383F"},children:r}),(0,n.jsxs)("div",{className:"comments__control",children:[(0,n.jsxs)("button",{className:"comments__favorite",onClick:()=>{P?likeReq(0):likeReq(1)},children:[!P&&(0,n.jsx)(m.Z,{size:"20px",solidOnHover:!0,className:"icon"}),P&&(0,n.jsx)(LikedIcon_LikeIcon,{size:"20px",solidOnHover:!0,solid:!0,className:"icon",color:"blue"}),C]}),(0,n.jsxs)("button",{className:"comments__favorite",onClick:()=>{X?likeReq(0):likeReq(-1)},children:[!X&&(0,n.jsx)(DisLikeIcon,{size:"20px",solidOnHover:!0,className:"icon"}),X&&(0,n.jsx)(DisLikedIcon,{size:"20px",solidOnHover:!0,solid:!0,className:"icon",color:"red"}),Z]}),(0,n.jsx)("div",{className:0===E?"flex items-center":"hidden items-center",children:(0,n.jsx)(p.Z,{color:"#2A85FF",size:12,cssOverride:{borderWidth:"3px"}})})]})]}),(0,n.jsx)(u.Z,{reportInfo:{pageId:t,pageType:"C"},onSave:e=>{h.Z.post("/report/",{content:null==e?void 0:e.content,pageType:null==e?void 0:e.pageType,pageId:null==e?void 0:e.pageId,type:null==e?void 0:e.type}).then(e=>{console.log(e),O(!1)}).catch(e=>{console.log(e)})},open:M,onCancel:()=>O(!1)})]})}function CommentReplyList(e){let{comments:t}=e;return t.map(e=>(0,n.jsx)("div",{className:"comments__answer",children:(0,n.jsx)(CommentReply,{...e})},e.Id))}function MessageIcon(e){let{size:t,color:s,className:l,solid:a}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:l,width:null!=t?t:20,height:null!=t?t:20,fill:null!=s?s:"#2A85FF",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"M4.666 6c0-.368.298-.667.667-.667h5.333c.368 0 .667.298.667.667s-.298.667-.667.667H5.333c-.368 0-.667-.298-.667-.667zm0 2.667c0-.368.298-.667.667-.667H8c.368 0 .667.298.667.667s-.298.667-.667.667H5.333c-.368 0-.667-.298-.667-.667zm8-6.667a2 2 0 0 1 2 2h0v6.667a2 2 0 0 1-2 2h0-7.333L3.52 14.178c-.868.724-2.187.106-2.187-1.024h0V4a2 2 0 0 1 2-2h0zm0 1.333H3.333c-.368 0-.667.298-.667.667v9.153l1.813-1.511c.24-.2.542-.309.854-.309h7.333c.368 0 .667-.298.667-.667V4c0-.368-.298-.667-.667-.667z"})})}let{Text:_}=a.default;function CommentInfo(e){let{Id:t,pageId:s,pageType:l,author:a,content:r,parent:j,children:y,usersLiked:k,usersDisLiked:N,timestamp:b,hasLiked:w,hasDisLiked:I,editable:S=!1}=e,C=(0,c.v9)(g.a),[z,Z]=(0,o.useState)(k),[L,R]=(0,o.useState)(N),[H,M]=(0,o.useState)(!1),[O,W]=(0,o.useState)(!1),[B,T]=(0,o.useState)(!1);(0,o.useRef)(null);let[F,E]=(0,o.useState)(-1),[A,D]=(0,o.useState)(-1);(0,c.I0)();let[q,J]=(0,o.useState)(""),[V,Y]=o.useState(!1),[G,Q]=(0,o.useState)(""),[U,P]=(0,o.useState)("auto"),[K,X]=(0,o.useState)(w),[$,ee]=(0,o.useState)(I);new d.Z;let[et,es]=(0,o.useState)("https://yt3.googleusercontent.com/-CFTJHU7fEWb7BYEb6Jh9gm1EpetvVGQqtof0Rbh-VQRIznYYKJxCaqv_9HeBcmJmIsp2vOO9JU=s900-c-k-c0x00ffffff-no-rj"),[en,el]=(0,o.useState)(0),[ea,eo]=(0,o.useState)(0),[ec,ei]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(null==C?void 0:C.signedIn)&&h.Z.get("/users/"+(null==C?void 0:C.studentId)).then(e=>{es(e.avatar)})},[null==C?void 0:C.signedIn,null==C?void 0:C.studentId]);let er=(0,o.useCallback)(()=>M(e=>!e),[]),ed=(0,v.useRouter)(),likeReq=e=>{D(0),h.Z.post("page/like/",{pageId:t,pageType:"C",score:e}).then(e=>{"Successfully like!"===e.message&&(D(1),eo(ea+1))}).catch(e=>{})};async function onSubmit(){E(0),h.Z.post("/comment/",{content:q,pageType:l,pageId:s,parentId:t,preCommentId:0}).then(e=>{"Comment successfully created"===e.message&&(console.log(e),el(e.CommentId),E(1)),console.log(e)}).catch(e=>{console.log(e)})}(0,o.useEffect)(()=>{console.log(t,ea);let e="page/like/C/".concat(t,"/");h.Z.get(e).then(e=>{console.log(e),Z(e.likes),R(e.dislikes),-1===e.userLike?(X(!1),ee(!0)):(1===e.userLike?X(!0):X(!1),ee(!1))}).catch(e=>{})},[t,ea]),(0,o.useEffect)(()=>{1===F&&(J("@"+a.name+" "),P("auto"),er())},[a.name,F,er]);let eh=new Date(b),ex=Date.now(),em=ex-b,eu="";eu=em<=5e3?"Vừa xong":em<6e4?"".concat(Math.floor(em/1e3)," gi\xe2y trước"):em<36e5?"".concat(Math.floor(em/6e4)," ph\xfat trước"):em<864e5?"".concat(Math.floor(em/36e5)," giờ trước"):em<31536e6?"".concat(Math.floor(em/864e5)," ng\xe0y trước"):em<31536e6?eh.toLocaleDateString("en-GB",{day:"numeric",month:"short"}):eh.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});let[ep,ef]=(0,o.useState)();return(0,o.useEffect)(()=>{let e="/comment/".concat(en);h.Z.get(e).then(e=>{ef(t=>[e,...null!=t?t:[]]),J(""),E(1)}).catch(e=>{})},[en]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:(0,i.m)("flex",0===j?"comments__item":"comments__answer"),children:[(0,n.jsx)("div",{className:"comment__avatar cursor-pointer",style:{width:"56px",height:"56px"},onClick:function(){ed.push("/profile?studentid="+a.studentId)},children:(0,n.jsx)(f.ZP,{className:"",src:a.avatar,size:56})}),(0,n.jsxs)("div",{className:"comment__details",style:{flex:"0 0 calc(100% - 48px)",width:"calc(100% - 48px)",paddingLeft:"16px"},children:[(0,n.jsxs)("div",{className:"flex",style:{alignItems:"center"},children:[(0,n.jsx)("div",{style:{marginRight:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(0,n.jsx)(_,{strong:!0,style:{fontSize:"18px"},children:a.name})}),(0,n.jsx)("div",{style:{marginLeft:"8px",whiteSpace:"nowrap",fontSize:"12px",fontWeight:"500",color:"#9A9FA5"},children:eu}),(0,n.jsxs)("div",{className:(0,i.m)("actions actions_small",!0===B?"active":""),children:[(0,n.jsx)("button",{className:"actions__button",onClick:()=>T(!B),children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(MoreHoriIcon,{size:"20px"})})}),(0,n.jsx)("div",{className:"actions__body",children:(0,n.jsxs)("button",{className:"actions__option",style:{alignItems:"start"},onClick:()=>W(!O),children:[(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{size:"20px",className:"icon"})}),(0,n.jsxs)("div",{className:"flex",style:{flexDirection:"column"},children:[(0,n.jsx)(_,{style:{textAlign:"left"},children:" B\xe1o c\xe1o b\xecnh luận"}),(0,n.jsxs)("div",{style:{wordWrap:"break-word",textAlign:"left",fontSize:"12px"},children:[" Ch\xfang t\xf4i sẽ kh\xf4ng cho ",a.name," biết ai đ\xe3 b\xe1o c\xe1o."]})]})]})})]})]}),(0,n.jsxs)("div",{className:"comment__login",style:{marginTop:"4px",fontSize:"14px",fontWeight:"500",color:"#6F767E"},children:["@",a.studentId]}),(0,n.jsx)("div",{className:"comment__content",style:{marginTop:"12px",fontSize:"16px",fontWeight:"500",color:"#33383F"},children:r}),(0,n.jsxs)("div",{className:"comments__control",children:[(0,n.jsxs)("button",{className:"comments__favorite",onClick:()=>{K?likeReq(0):likeReq(1)},children:[!K&&(0,n.jsx)(m.Z,{size:"20px",solidOnHover:!0,className:"icon"}),K&&(0,n.jsx)(LikedIcon_LikeIcon,{size:"20px",solidOnHover:!0,solid:!0,className:"icon",color:"blue"}),z]}),(0,n.jsxs)("button",{className:"comments__favorite",onClick:()=>{$?likeReq(0):likeReq(-1)},children:[!$&&(0,n.jsx)(DisLikeIcon,{size:"20px",solidOnHover:!0,className:"icon"}),$&&(0,n.jsx)(DisLikedIcon,{size:"20px",solidOnHover:!0,solid:!0,className:"icon",color:"red"}),L]}),(0,n.jsxs)("button",{className:"comments__reply",onClick:er,children:[(0,n.jsx)(ReplyIcon,{size:"20px",className:"icon"}),"Reply"]}),(null==y?void 0:y.length)>0&&!1===ec&&(0,n.jsxs)("button",{className:"comments__reply",onClick:()=>{let e="comment/getchildren/".concat(t);D(0),h.Z.get(e).then(e=>{console.log(e),ef([...e]),D(-1),ei(!0)}).catch(e=>{})},children:[(0,n.jsx)(MessageIcon,{size:"20px",className:"icon"}),"Xem tất cả ",null==y?void 0:y.length," phản hồi"]}),(0,n.jsx)("div",{className:0===A?"flex items-center":"hidden items-center",children:(0,n.jsx)(p.Z,{color:"#2A85FF",size:12,cssOverride:{borderWidth:"3px"}})})]}),H&&(0,n.jsxs)("div",{className:"answer",children:[(0,n.jsx)("div",{className:"answer__avatar",style:{width:"48px",height:"48px"},children:(0,n.jsx)(f.ZP,{className:"",src:et,size:48})}),(0,n.jsxs)("div",{className:"answer__details",children:[(0,n.jsx)("div",{className:"answer__message",children:(0,n.jsx)("textarea",{id:"reply__textarea",className:"answer__textarea",name:"answer",placeholder:"Leave something to reply",value:q,onChange:e=>{J(e.target.value),P("0px"),P("".concat(e.target.scrollHeight,"px"))},style:{height:U}})}),(0,n.jsxs)("div",{className:"answer__btns",children:[(0,n.jsx)("button",{className:""===q?"button button-small answer__button disabled":"button button-small answer__button",onClick:onSubmit,children:"Reply"}),(0,n.jsx)("button",{className:"button-stroke button-small answer__button",onClick:er,children:"Cancel"}),(0,n.jsx)("div",{className:0===F?"flex items-center":"hidden items-center",children:(0,n.jsx)(p.Z,{color:"#2A85FF",size:24,cssOverride:{borderWidth:"4px"}})})]})]})]})]}),(0,n.jsx)(u.Z,{reportInfo:{pageId:t,pageType:"C"},onSave:e=>{h.Z.post("/report/",{content:null==e?void 0:e.content,pageType:null==e?void 0:e.pageType,pageId:null==e?void 0:e.pageId,type:null==e?void 0:e.type}).then(e=>{console.log(e),W(!1)}).catch(e=>{console.log(e)})},open:O,onCancel:()=>W(!1)})]}),(0,n.jsx)("div",{className:"comment_reply_container",children:(0,n.jsx)(CommentReplyList,{comments:null!=ep?ep:[]})})]})}function CommentList(e){let{comments:t}=e;return t.map(e=>(0,n.jsx)("div",{className:"comments__item",children:(0,n.jsx)(CommentInfo,{...e})},e.Id))}function Comment(e){let{pageId:t,pageType:s,offset:a=0,limit:i=5}=e,r=(0,c.v9)(g.a),[d,x]=(0,o.useState)(),[m,u]=(0,o.useState)(0),[v,j]=(0,o.useState)(-1),[_,y]=(0,o.useState)(0),[k,N]=(0,o.useState)(-1),[b,w]=(0,o.useState)(0),[I,S]=(0,o.useState)(0),[C,z]=(0,o.useState)(""),[Z,L]=(0,o.useState)(0),[R,H]=(0,o.useState)("https://yt3.googleusercontent.com/-CFTJHU7fEWb7BYEb6Jh9gm1EpetvVGQqtof0Rbh-VQRIznYYKJxCaqv_9HeBcmJmIsp2vOO9JU=s900-c-k-c0x00ffffff-no-rj");async function onSubmit(){N(0),h.Z.post("/comment/",{content:C,pageType:s,pageId:t,parentId:0,preCommentId:0}).then(e=>{"Comment successfully created"===e.message&&(u(e.CommentId),L(Z+1))}).catch(e=>{})}return(0,o.useEffect)(()=>{(null==r?void 0:r.signedIn)&&h.Z.get("/users/"+(null==r?void 0:r.studentId)).then(e=>{H(e.avatar)})},[null==r?void 0:r.signedIn,null==r?void 0:r.studentId]),(0,o.useEffect)(()=>{let e="/page/comment-count/".concat(s,"/").concat(t,"/");h.Z.get(e).then(e=>{y(e.count)}).catch(e=>{})},[t,s]),(0,o.useEffect)(()=>{j(0);let e="/page/comment/".concat(s,"/").concat(t,"/0/5");h.Z.get(e).then(e=>{console.log(e),console.log(e.length),x(null!=e?e:[]),z(""),N(1),j(1)}).catch(e=>{})},[t,s]),(0,o.useEffect)(()=>{if(j(0),0===b)return;console.log("cc",b,t,s);let e="/page/comment/".concat(s,"/").concat(t,"/").concat(b,"/5");h.Z.get(e).then(e=>{console.log(e),console.log(e.length),x(t=>[...null!=t?t:[],...e]),z(""),N(1),j(1)}).catch(e=>{})},[b,t,s]),(0,o.useEffect)(()=>{if(0===m)return;let e="/comment/".concat(m);h.Z.get(e).then(e=>{x(t=>[e,...null!=t?t:[]]),z(""),N(1)}).catch(e=>{})},[m]),console.log(d),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(l.Z,{title:"B\xecnh luận",boxContent:_,size:"middle",boxClassName:"px-2"}),(0,n.jsxs)("div",{style:{marginTop:"40px",padding:"4px"},children:[(0,n.jsx)("div",{className:"editor__label",children:" Để lại một b\xecnh luận?"}),(0,n.jsxs)("div",{className:"answer_main",children:[(0,n.jsx)("div",{className:"answer__avatar",style:{width:"48px",height:"48px"},children:(0,n.jsx)(f.ZP,{className:"",src:R,size:48})}),(0,n.jsxs)("div",{className:"answer__details",children:[(0,n.jsx)("textarea",{rows:4,className:"mainText",name:"answer",placeholder:"H\xe3y để lại một b\xecnh luận (Lưu \xfd kh\xf4ng spam, b\xecnh luận nhảm, thảo luận ch\xednh trị, c\xf4ng k\xedch c\xe1 nh\xe2n/tập thể, ...",value:C,onChange:e=>{z(e.target.value)}}),(0,n.jsxs)("div",{className:"answer__btns",children:[(0,n.jsx)("button",{className:""===C?"button button-small answer__button disabled":"button button-small answer__button",onClick:onSubmit,children:"B\xecnh luận"}),(0,n.jsx)("div",{className:0===k?"flex items-center":"hidden items-center",children:(0,n.jsx)(p.Z,{color:"#2A85FF",size:24,cssOverride:{borderWidth:"4px"}})})]})]})]}),(0,n.jsx)(CommentList,{comments:null!=d?d:[]}),_-b-i-Z>0&&(0,n.jsx)("div",{className:"flex justify-center mt-8",children:(0,n.jsxs)("button",{className:"button message__button button-stroke",onClick:()=>{w(b+i+Z),L(0)},children:["Xem th\xeam ",_-b-i-Z," phản hồi",(0,n.jsx)("div",{className:0===v?"flex items-center ml-2":"hidden items-center ml-2",children:(0,n.jsx)(p.Z,{color:"#2A85FF",size:12,cssOverride:{borderWidth:"3px"}})})]})})]})]})}},78399:function(e,t,s){"use strict";s.d(t,{Z:function(){return ReportForm}});var n=s(57437),l=s(58861),a=s(36045),o=s(40155),c=s(79404),i=s(33071),r=s(80338),d=s(35302),h=s(2265);function DynamicRadioButtons(e){let{options:t,onSelect:s}=e,[l,a]=(0,h.useState)(null),handleOptionChange=e=>{let t=e.target.value;a(t),s(t)};return(0,n.jsx)("div",{style:{maxWidth:"400px"},children:t.map(e=>(0,n.jsxs)("label",{className:"radio",children:[(0,n.jsx)("input",{id:e.value,className:"radio__input",type:"radio",name:"report_types",value:e.value,checked:l===e.value,onChange:handleOptionChange}),(0,n.jsxs)("span",{className:"radio__inner",children:[(0,n.jsxs)("div",{style:{display:"flex",justifyItems:"center"},children:[(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)("div",{className:"radio__tick"})}),(0,n.jsx)("div",{className:"radio__text",children:e.label})]}),(0,n.jsx)("div",{style:{display:"flex"},children:(0,n.jsx)("div",{style:{color:"#6F767E",wordWrap:"break-word",fontWeight:"500",textAlign:"left",fontSize:"12px",marginLeft:"32px"},children:"Nhũ hoa (trừ trường hợp đang cho con b\xfa, li\xean quan đến sức khỏe v\xe0 h\xe0nh động phản đối)"})})]})]},e.value))})}s(47301);var x=s(43012),m=s(51696);let{Title:u,Text:p}=d.default,f=[{label:"Bạo lực",value:"1"},{label:"Tự tử hoặc tự g\xe2y thương t\xedch",value:"2"},{label:"Th\xf4ng tin sai sự thật",value:"3"},{label:"Vấn đề kh\xe1c",value:"4"}];function ReportForm(e){let{reportInfo:t,onSave:s,open:l,onCancel:o}=e;return(0,n.jsx)(i.Z,{title:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(u,{level:3,className:"flex-1 !mb-0",children:(0,n.jsxs)(r.default,{size:"middle",children:[(0,n.jsx)(a.Z,{}),"B\xe1o c\xe1o"]})})}),open:l,onCancel:o,footer:[],width:"fit-content",closeIcon:!1,destroyOnClose:!0,children:(0,n.jsx)(Content,{onSave:s,reportInfo:t})})}function Content(e){let{reportInfo:t,onSave:s}=e,[a]=c.Z.useForm(),[i,r]=(0,h.useState)(null),[d,u]=(0,h.useState)(-1);return(0,n.jsxs)(c.Z,{form:a,name:"subject",onFinish:e=>{u(0),s({type:e.type,content:e.content,pageType:t.pageType,pageId:t.pageId})},initialValues:{type:1,content:"",pageType:t.pageType,pageId:t.pageId},className:"flex flex-col",children:[(0,n.jsx)(o.default,{className:"border",style:{marginTop:"8px",marginBottom:"16px"}}),(0,n.jsx)(c.Z.Item,{name:"type",children:(0,n.jsx)(DynamicRadioButtons,{options:f,onSelect:e=>{r(e)}})}),(0,n.jsx)(p,{strong:!0,style:{marginBottom:"8px",fontSize:"16px"},children:" Nội dung b\xe1o c\xe1o "}),(0,n.jsx)(c.Z.Item,{name:"content",className:"mb-0",children:(0,n.jsx)(x.Z,{size:"large",className:"font-medium",rows:4})}),(0,n.jsxs)("div",{className:"flex flex-cols items-center mt-4",children:[(0,n.jsx)(l.k,{style:{marginRight:"8px"},className:"self-end",onClick:a.submit,children:"Gửi b\xe1o c\xe1o"}),(0,n.jsx)("div",{className:0===d?"flex items-center":"hidden items-center",children:(0,n.jsx)(m.Z,{color:"#2A85FF",size:24,cssOverride:{borderWidth:"4px"}})})]})]})}},14666:function(e,t,s){"use strict";s.d(t,{Z:function(){return TitleWithBox}});var n=s(57437);s(2265);var l=s(36045),a=s(23986);function TitleWithBox(e){let{color:t,title:s,titleClassName:o,size:c="large",boxContent:i,className:r,boxClassName:d}=e;return(0,n.jsxs)("div",{className:(0,a.m)("flex gap-4 items-center",r),children:[(0,n.jsx)(l.Z,{color:t,className:d,children:i}),(0,n.jsx)("span",{className:(0,a.m)("font-semibold ".concat("ultra"===c?"text-3xl":"text-2xl"),o),children:s})]})}},25418:function(e,t,s){"use strict";s.d(t,{a:function(){return authSelector}});let authSelector=e=>e.auth},50777:function(){},47301:function(){}}]);